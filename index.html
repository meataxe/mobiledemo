<!DOCTYPE html>
<html>
  <head>
    <title>PNCC Timesheets</title>
    <link href="content/css/kendo.common.min.css" rel="stylesheet"/>
    <link href="content/css/kendo.default.min.css" rel="stylesheet"/>
    <link href="content/css/kendo.mobile.all.min.css" rel="stylesheet"/>
    <link href="content/css/style.css" rel="stylesheet" />
  
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="content/js/kendo.all.min.js"></script>    
  </head>
<body>
    <div data-role="layout" data-id="default">
        <header data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a class="about-button" data-align="right" href="content/about.html" data-role="button">About</a>
        </div>
        </header>

        <footer data-role="footer" data-id="default">
        <div data-role="tabstrip">
          <a href="#index" data-icon="home">Home</a>
          <a href="#staff" data-icon="organize">My Staff</a>
          <a href="#account" data-icon="contacts">Account</a>
        </div>
        </footer>
    </div>

  <div data-title="PNCC Timesheets" data-role="view" id="index" data-url="/" data-layout="default" data-show="showMenuView">
    <ul data-role="listview" data-style="inset" data-type="group">
      <li>
        My Timesheets

        <ul id="my-timesheets"
            class="item-list"
            data-role="listview"
            data-template="timesheetTemplate"
            data-source="myTimesheets"></ul>
      </li>
    </ul>
  </div>
  
  <div data-role="view" id="staff" data-layout="default" data-title="My Staff">
    <ul data-role="listview" data-style="inset" data-type="group">
      <li>
        Staff Timesheets

        <ul id="staff-timesheets"
            class="item-list"
            data-role="listview"
            data-template="timesheetTemplate"
            data-source="staffTimesheets"></ul>
      </li>
    </ul>
  </div>

  <div data-role="view" id="account" data-layout="default" data-title="My Account">
        <ul data-role="listview" data-style="inset" data-type="group">
            <li>
                Account
                <ul>
                    <li>Name<span class="list-item-data">Mark Bellhouse</span></li>
                    <li>Supervisor<span class="list-item-data">Linda Lindeman</span></li>
                </ul>
            </li>
        </ul>
    </div>
 
  <script id="timesheetTemplate" type="text/x-kendo-template">
    <h2>#:date#</h2>          
  </script>

  <script>
        var app;

        var schema = {model: {}};

        var ds = new kendo.data.DataSource({
          schema: {
            model: {
              id: "id"
            }
          },
          transport: {
            read: {
              url: "content/timesheets.json",
              dataType: "json"
            }
          },
          group: "category",
          error: function() { console.log(arguments); }
        });

        var myTimesheets = new kendo.data.DataSource({
          schema: schema
        }),
        staffTimesheets = new kendo.data.DataSource({
          schema: schema
        });

        ds.bind("change", function () {
          var data = ds.data();

          myTimesheets.data(data.mytimesheets);
          staffTimesheets.data(data.stafftimesheets);
        });

        ds.fetch();

        function showMenuView(e) {
          e.view.content.find(".item-list").data("kendoMobileListView").refresh();
        }

        app = new kendo.mobile.Application($(document.body),
        {
          platform: 'android',
          transition: "slide"
        });
    </script>
</body>
</html>

